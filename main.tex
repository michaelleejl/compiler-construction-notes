\documentclass[12pt,a4paper,twoside,openany, chapterprefix=on]{scrbook} 

\usepackage{url}
\def\UrlBreaks{\do\/\do-}
\usepackage{catchfile}
\usepackage{epigraph}
\usepackage[export]{adjustbox}
\usepackage[normalem]{ulem}
\usepackage{bold-extra}
\usepackage{hhline}
\usepackage{cprotect}
\usepackage[square, numbers]{natbib}
\usepackage{booktabs}
\usepackage{multirow}
% \usepackage{listings}
\usepackage{tcolorbox}
\usepackage{tabularx}
\usepackage{tikz-qtree}
\usepackage{tikz-qtree-compat}
\usepackage{caption}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{array}
\usepackage{colortbl}
\tcbuselibrary{skins}
\usepackage[
	fancytheorems, 
	noindent, 
	fancyproofs,
	comments
]{euan}
\usepackage[textsize=tiny, textwidth=60,backgroundcolor=yellow, linecolor=yellow, tickmarkheight=10]{todonotes}

\usepackage{float}
\usepackage[margin=2cm]{geometry}
\usepackage{ifthen}

\definecolor{codegrey}{rgb}{0.6,0.6,0.6}
\definecolor{codemagenta}{HTML}{ae2012}
\definecolor{codeteal}{HTML}{ca6702}
\definecolor{codepurple}{HTML}{005f73}
\definecolor{backcolour}{HTML}{F8F8FB}
\definecolor{background}{HTML}{F0F0F4}
\definecolor{darkest}{gray}{0.3}
\definecolor{nonterminal}{HTML}{006B71}
\definecolor{selected}{HTML}{00AB97}


\definecolor{grey}{gray}{0.5}
\definecolor{lightgrey}{gray}{0.9}
\definecolor{verylightgrey}{rgb}{0.96,0.96,0.965}
\let\oldtabularx\tabularx
\renewcommand*{\tabularx}{\rowcolors{1}{}{white}\oldtabularx}
\colorlet{selected}{selected}
\usepackage[most]{tcolorbox}
\newtcolorbox{tcbleftbar}[1][]{
blanker, breakable, left=1em, colback=white, before=\par\noindent, borderline west = {0.5pt}{0pt}{grey}, #1
}
\tcbset{on line, 
        boxsep=4pt, left=0pt,right=0pt,top=0pt,bottom=0pt,
        colframe=white,colback=nonterminal!100,  
        highlight math style={enhanced}
        }
        
\usepackage{makecell}
\usepackage{xcolor}
\usetikzlibrary{intersections}
\usetikzlibrary{bending,shapes,backgrounds,patterns,shapes.misc}
\usetikzlibrary{positioning,arrows,automata,arrows.meta,calc}
\tikzset{rectangular state/.style={draw,rectangle,rounded corners}}
\renewcommand\theadfont{\bfseries}
\tcbuselibrary{hooks}

\newtcolorbox{tctabularx}[1]{%
        enhanced,
        fonttitle=\sffamily\bfseries,
        fontupper=\sffamily,
        colback=verylightgrey,
        colframe=grey!50!black,colbacktitle=gray,
        coltitle=black,
        boxrule=0pt,
        sharp corners,
        #1,
        boxrule=0.5pt,
        before upper app={\rowcolor{lightgrey}\theadfont{\bfseries}}
}% end tctabularx        

\setkomafont{dictumtext}{\itshape \small}
\setkomafont{dictumauthor}{\normalfont}
\renewcommand*\dictumwidth{.6\linewidth}
\renewcommand*\dictumauthorformat[1]{--- #1}
\renewcommand*\dictumrule{}

\usepackage{import}

\raggedbottom

\pagestyle{plain}

% \lstdefinestyle{mystyle}{
%     backgroundcolor=\color{backcolour},   
%     commentstyle=\color{codeteal},
%     keywordstyle=\color{codepurple}\fontfamily{lmtt}\fontseries{b}\selectfont,
%     numberstyle=\tiny\color{codegrey},
%     stringstyle=\color{codemagenta},
%     basicstyle=\ttfamily\footnotesize,
%     breakatwhitespace=false,         
%     breaklines=true,                 
%     captionpos=b,                    
%     keepspaces=true,                 
%     numbers=left,                    
%     numbersep=5pt,                  
%     showspaces=false,                
%     showstringspaces=false,
%     showtabs=false,                  
%     tabsize=2
% }

% % \usepackage{pxfonts}
% \lstdefinelanguage{Python}{
%   keywords={sum},
%   % keywordstyle=\color{blue}\bfseries,
%   % ndkeywords={class, export, boolean, throw, implements, import, this},
%   % ndkeywordstyle=\color{darkgray}\bfseries,
%   % identifierstyle=\color{black},
%   % sensitive=false,
%   comment=[l]{#},
%   morecomment=[s]{/*}{*/},
%   % commentstyle=\color{purple}\ttfamily,
%   % stringstyle=\color{red}\ttfamily,
%   morestring=[b]',
%   morestring=[b]"
% }

% \lstdefinelanguage{R}{
%   keywords={sum, <-, c},
%   % keywordstyle=\color{blue}\bfseries,
%   % ndkeywords={class, export, boolean, throw, implements, import, this},
%   % ndkeywordstyle=\color{darkgray}\bfseries,
%   % identifierstyle=\color{black},
%   % sensitive=false,
%   comment=[l]{#},
%   morecomment=[s]{/*}{*/},
%   % commentstyle=\color{purple}\ttfamily,
%   % stringstyle=\color{red}\ttfamily,
%   morestring=[b]',
%   morestring=[b]"
% }

% \lstset{style=mystyle}

\usepackage{caption}
\usepackage{subcaption}

\usepackage{longtable}

\usepackage[hyperfootnotes=false]{hyperref}
\makeatletter
\Hy@AtBeginDocument{%
  \def\@pdfborder{0 0 1}% Overrides border definition set with colorlinks=true
  \def\@pdfborderstyle{/S/U/W 1}% Overrides border style set with colorlinks=true
                                % Hyperlink border style will be underline of width 1pt
}
\makeatother
\hypersetup{
    colorlinks = true,
    linkcolor = linkcolor,
    linkbordercolor = linkcolor,
    citecolor = black,
    pdfborderstyle={/S/U/W 1},
    urlcolor = linkcolor,
    urlbordercolor = linkcolor,
    citebordercolor = white!0
}
\usepackage[nameinlink]{cleveref}

\newcommand\blfootnote[1]{%
  \begin{NoHyper}%
  \renewcommand\thefootnote{}\footnote{#1}%
  \addtocounter{footnote}{-1}%
  \end{NoHyper}%
}


% \SetupFloatingEnvironment{listing}{name=Source Code}

\setlength{\epigraphwidth}{0.6\textwidth}
\setlength{\epigraphrule}{0pt}

\usepackage{etoolbox}
    \makeatletter
    \newlength\epitextskip
    \pretocmd{\@epitext}{\em}{}{}
    \apptocmd{\@epitext}{\em}{}{}
    \patchcmd{\epigraph}{\@epitext{#1}\\}{\@epitext{#1}\\[\epitextskip]}{}{}
    \makeatother

\usepackage{newfloat}
\usepackage{inconsolata}
% \newenvironment{code}{\captionsetup{type=listing}}{}
\usepackage[section, newfloat]{minted}
\usepackage{listings}
\lstdefinestyle{manual}{
  basicstyle=\linespread{0.88}\ttfamily,
  escapeinside=!!
}
\lstdefinelanguage{OCaml}{
  keywords={
    and,as,assert,asr,begin,class,constraint,do,done,downto,effect,else,end,exception,
    external,false,for,fun,function,functor,if,implicit,in,include,inherit,initializer,
    land,lazy,let,lor,lsl,lsr,lxor,macro,match,method,mod,module,mutable,new,object,
    of,open,or,private,rec,sig,struct,then,to,true,try,type,val,virtual,when,
    with,while},
  comment=[s]{(*}{*)},
}

\lstdefinestyle{ocaml}{
  language=OCaml,
  basicstyle=\linespread{0.88}\scriptsize\ttfamily\codecolor,
  commentstyle=\color{darkpurple},
  keywordstyle=\color{darkred}\sffamily,
  showstringspaces=false,
  mathescape=true,
  escapeinside=!!
}

\lstdefinestyle{pseudocode}{
  basicstyle=\ttfamily,
  escapeinside=!!,
  backgroundcolor=\color{backcolour}
}

\makeatletter
\newcommand\incircbin
{%
  \mathpalette\@incircbin
}
\newcommand\@incircbin[2]
{%
  \mathbin%
  {%
    \ooalign{\hidewidth$#1#2$\hidewidth\crcr$#1\bigcirc$}%
  }%
}
\newcommand{\ostar}{\incircbin{*}}

% \SetupFloatingEnvironment{listing}{name=Source Code}

\newcounter{codeCounter}[section]
\counterwithin{codeCounter}{section}
\newenvironment{code}[1][]{\centering%
\refstepcounter{codeCounter}%
\def\captiontemp{#1}%
}{\begin{center}%
\vspace{-5mm}
{Listing~\thecodeCounter. \captiontemp}%
\end{center}}

\crefname{codeCounter}{listing}{listings}
\Crefname{codeCounter}{Listing}{Listings}

%\usepackage{natbib}
\bibliographystyle{abbrvnat}

\setkomafont{chapterprefix}{\Large}
\setlength{\footnotemargin}{2mm}

\usetikzlibrary{arrows}
\usetikzlibrary{positioning}
\usetikzlibrary{calc}

\tikzset{edge/.style = {->,> = latex'}}
\tikzset{equality/.style = {double, double distance=2.5pt}}
\tikzset{vertex/.style={text depth=0.4ex}}
\usetikzlibrary{positioning}

\title{Compilers Notes}
\author{mjll2}
\date{June 2024}

\begin{document}

\maketitle

\import{lec01}{introduction}

\import{lec02}{lexing}

\import{lec03}{context-free-grammars}
\import{lec03}{parser-combinators}
\import{lec04}{LL(k)}

\import{lec08}{cps}

\bibliography{library}

\end{document}
